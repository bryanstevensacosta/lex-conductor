spec_version: v1
name: fusion_agent
version: 1.0.0
description: Correlates internal policies with external regulations for comprehensive legal analysis
type: external

connection:
  type: agent_connect
  endpoint: https://lexconductor-agents.25rf0qd39xzz.jp-osa.codeengine.appdomain.cloud/fusion/v1/chat
  timeout: 30
  retry:
    max_attempts: 3
    backoff: exponential

capabilities:
  - contract_analysis
  - signal_correlation
  - compliance_checking
  - gap_detection
  - regulatory_mapping

system_prompt: |
  You are the Fusion Agent, a specialized legal AI that performs Signal Fusion analysis.
  
  Your expertise:
  - Correlating internal company policies (Golden Clauses) with contract text
  - Mapping external regulatory requirements to contract clauses
  - Identifying compliance gaps and conflicts
  - Providing confidence scores for each analysis
  
  Signal Sources:
  1. Internal Signals: Golden Clauses from Cloudant (company policies)
  2. External Signals: Regulatory requirements from COS (EU AI Act, GDPR, CCPA, etc.)
  3. Contract Text: The actual clause being analyzed
  
  Your analysis process:
  1. Query Cloudant for relevant Golden Clauses
  2. Retrieve applicable regulations from COS
  3. Correlate all three signals
  4. Identify alignment and gaps
  5. Calculate confidence scores
  6. Provide structured recommendations
  
  Output format: Structured JSON with:
  - internal_signals: Array of Golden Clauses found
  - external_signals: Array of regulatory requirements
  - correlation_matrix: How signals align or conflict
  - gaps: Array of compliance gaps detected
  - recommendations: Suggested modifications
  - confidence: Overall confidence score (0.0 to 1.0)

input_schema:
  type: object
  properties:
    contract_text:
      type: string
      description: The contract clause or full text to analyze
    contract_type:
      type: string
      description: Type of contract (NDA, MSA, Service Agreement, etc.)
      enum:
        - NDA
        - MSA
        - Service Agreement
        - M&A Agreement
        - Employment Agreement
        - Other
    jurisdiction:
      type: string
      description: Applicable jurisdiction
      enum:
        - US
        - UK
        - EU
        - Multi-jurisdiction
    clause_focus:
      type: string
      description: Specific clause to focus on (optional)
      examples:
        - Indemnification
        - Liability
        - Data Protection
        - Intellectual Property
  required:
    - contract_text
    - contract_type

output_schema:
  type: object
  properties:
    internal_signals:
      type: array
      items:
        type: object
        properties:
          clause_id:
            type: string
          text:
            type: string
          confidence:
            type: number
          alignment:
            type: string
            enum: [ALIGNED, CONFLICT, PARTIAL]
    external_signals:
      type: array
      items:
        type: object
        properties:
          regulation:
            type: string
          requirement:
            type: string
          confidence:
            type: number
          alignment:
            type: string
            enum: [COMPLIANT, NON_COMPLIANT, PARTIAL]
    correlation_matrix:
      type: object
      properties:
        internal_external:
          type: string
        internal_contract:
          type: string
        external_contract:
          type: string
    gaps:
      type: array
      items:
        type: object
        properties:
          type:
            type: string
          description:
            type: string
          severity:
            type: string
            enum: [LOW, MEDIUM, HIGH, CRITICAL]
          recommendation:
            type: string
    recommendations:
      type: array
      items:
        type: object
        properties:
          action:
            type: string
          rationale:
            type: string
          priority:
            type: string
            enum: [LOW, MEDIUM, HIGH]
    confidence:
      type: number
      minimum: 0.0
      maximum: 1.0
  required:
    - internal_signals
    - external_signals
    - gaps
    - confidence

error_handling:
  on_timeout:
    action: retry
    message: "Fusion analysis timed out. Retrying..."
  on_error:
    action: return_partial
    message: "Fusion analysis encountered an error. Returning partial results."

performance:
  expected_response_time: 5000  # milliseconds
  max_response_time: 8000
  cache_ttl: 3600  # Cache Golden Clauses for 1 hour

metadata:
  author: Team AI Kings
  created: 2026-01-30
  hackathon: IBM Dev Day AI Demystified 2026
  data_sources:
    - Cloudant (golden_clauses, regulatory_mappings)
    - Cloud Object Storage (regulatory PDFs)
  tags:
    - signal-fusion
    - compliance
    - regulatory-analysis
    - external-agent
